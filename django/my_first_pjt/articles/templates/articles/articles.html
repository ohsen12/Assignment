{% extends "base.html" %}

{% block content %}
    <h1>ğŸ“– ì´ê³³ì€ ì•„í‹°í´ í˜ì´ì§€ì…ë‹ˆë‹¤. </h1>
    
    {% if request.user.is_authenticated %}
        <a href="{% url 'articles:create' %}"> {#ì•µì»¤ íƒœê·¸ëŠ” GET ë°©ì‹ì„!!#}
            <button>ìƒˆë¡œìš´ ì•„í‹°í´ ì‘ì„±í•˜ëŸ¬ ê°€ê¸°</button>
        </a>
        <br><br> 
    {% else %}
        <a href="{% url 'accounts:login' %}">ë¡œê·¸ì¸í•˜ê³  ê¸€ ì‘ì„±í•˜ëŸ¬ ê°€ê¸°</a><br><br>
    {% endif %}
    
    <hr>

    {% for article in articles %} {#ì—¬ê¸°ì„œ articlesëŠ” ë·° í•¨ìˆ˜ì—ì„œ contextë¡œ ë°›ì€ ê²ƒ#}

        <a href="{% url 'articles:article_detail' article.pk %}"> {#ê¸€ì œëª© í´ë¦­í•˜ë©´ ì´ë™í•  ìˆ˜ ìˆê²Œ ì•µì»¤íƒœê·¸ ì•ˆì— ë„£ì–´ì£¼ê³  urlì´ë‘ í•´ë‹¹ pkê°’ ë³€ìˆ˜ë¡œ í• ë‹¹í•˜ê¸°#}
            <p>[{{article.id}}] {{article.title}} - {{article.author.username}}</p>
        </a> 
        <p>ì¢‹ì•„ìš” {{ article.like_count }}ê°œ </p>

        <form action="{% url 'articles:like' article.pk %}" method="POST">
            {% csrf_token %}
            {% if request.user in article.like_users.all %}
                <button type="submit">ì¢‹ì•„ìš” ì·¨ì†Œ</button>
            {% else %}
                <button type="submit">ì¢‹ì•„ìš”</button>
            {% endif %}
        </form>

        <hr>
    {% endfor %}

{%endblock content%}