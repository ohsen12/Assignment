{% extends "base.html" %}

{% block content %}

    <h1>아티클 상세 페이지</h1>
    {% if article.image %}
		<img src="{{ article.image.url }}" > {# 실제 이미지를 넣는게 아님!#}
    {% endif %}		

    <p>제목: {{ article.title }}</p>
    <p>내용: {{ article.content }}</p>
    <p>작성일시: {{ article.created_at }}</p>
    <p>수정일시: {{ article.updated_at }}</p>
    <br>
    
    <hr>
    <h3>댓글</h3>
    <form action="{% url "articles:comment_create" article.pk %}" method="POST">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <input type="submit" value="댓글작성">
    </form>

    {% comment %} 
    context에 담아서 들고온 해당 게시글의 댓글들 for문 돌려서 하나씩 다 보여주기
    <ul> : unordered_list 순서 없는 목록. 목록의 시작과 끝을 정의하며, 목록의 각 항목은 <li> 태그로 감싸져야 함.
    <li> : list item 목록 항목. 목록의 각 항목을 정의하며, <ul> 태그 안에 포함되어야 한다.
    <p> : paragraph 단락. 텍스트를 단락으로 정의한다. 여기서는 댓글의 내용을 나타내기 위해 사용된다.
    {% endcomment %}
    <ul>
        {% for comment in comments %}
            <li>
                <p>{{ comment.content }}</p>  {# 장고의 템플릿 변수. 반복문 안에서 comment 객체의 content 속성을 출력 #}
            </li>
        {% endfor %}
    </ul>

    <a href="{% url 'articles:articles' %}">아티클 목록으로 가기</a><br><br>
    
    
    {#해당 아티클 삭제하기 위해 delete url로 보내기. DB 조작하는 거니까 포스트 방식을 사용한다.#}
    <form action="{% url 'articles:delete' article.pk %}" method="POST">
        {% csrf_token %}
        <input type="submit" value="글 삭제"> 
        {# delete url로 pk값을 포스트 방식으로 보내서, delete 뷰 함수로 이어지게 함 (해당 pk값의 레코드를 삭제) #}
    </form> <br>

    <a href="{% url 'articles:update' article.pk %}"><button>글 수정하러 가기</button></a>


{% endblock content %}